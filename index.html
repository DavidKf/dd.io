<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="DnD, dangeon and dragons, roleplay, dice, roller, 3D, RPG, wargame" />
    <meta name="description" content="Online 3D dice roller" />
    <meta id="addressChrome" name="theme-color">
    <meta name="viewport" content="user-scalable=no" />

    <title>Dice Roller</title>

    <style type="text/css">
        @import "main.css";
    </style>
    <style type="text/css">
        @import "dice/dice.css";
    </style>

</head>

<body style="margin: 0" id="body">
    <div class="control_panel">
        <p id="loading_text">Carregando bibliotecas...</p>
        <div id="results">
            <span id="label_last_title">Ultimos resultados:</span>
            <div style="margin-top: 5px;width: 100%; max-height: 15vh; overflow: auto;">
                <label id="label_last"></label>
            </div>
            <button id="limpar_historia">Limpar</button>
        </div>
    </div>
    <div id="info_div" style="display: none">
        <div class="center_field">
            <span id="label"></span>
        </div>
        <div class="center_field">
            <div class="bottom_field">
                <span id="labelhelp">Clique e arraste para jogar novamente.</span>
            </div>
        </div>
    </div>
    <div id="selector_div" style="display: none">
        <div class="center_field">
            <div id="sethelp">
                Escolha os seus dados clicando neles, ou os digite no campo abaixo.
            </div>
        </div>
        <div class="center_field">
            <input type="text" id="set" value="4d6"></input>
            <br/>
            <button id="clear">Limpar</button>
            <button style="margin-left: 0.6em" id="throw">Jogar</button>
        </div>
    </div>
    <div id="canvas">
        <button id="color-picker-wrapper" onclick="openPicker()" style="display: none">
            Mudar Cor
            <input type="color" id="color-picker" onchange="changeColor()">
        </button>
    </div>

    <script>
        var color_picker = document.getElementById("color-picker");
        var color_picker_wrapper = document.getElementById("color-picker-wrapper");
        var set = document.getElementById("set");
        var savedColor = localStorage.getItem('diceColor');

        if (savedColor) {
            color_picker_wrapper.style.backgroundColor = savedColor;
            color_picker.value = savedColor;
            set.style.borderColor = savedColor;
        }

        color_picker.onchange = function() {
            color_picker_wrapper.style.backgroundColor = color_picker.value;
            set.style.borderColor = color_picker.value;

            var picker = document.getElementById('color-picker');
            localStorage.setItem('diceColor', picker.value);
            location.reload();
        }

        function openPicker() {
            color_picker.click();
        }

        color_picker_wrapper.style.backgroundColor = color_picker.value;
    </script>

    <script src="libs/three.min.js"></script>
    <script src="libs/cannon.min.js"></script>
    <script type="text/javascript" src="teal.js"></script>
    <script type="text/javascript" src="dice/dice.js"></script>
    <script type="text/javascript" src="dice/main.js"></script>
    <script type="text/javascript" defer="defer">
        dice_initialize(document.body);
    </script>
</body>

</html>